<!-- src/app/app.component.html -->
<div class="app-container">
    <!-- Header -->
    <header class="app-header">
        <div class="container">
            <h1 class="app-title">{{ title }}</h1>
            <p class="app-subtitle">
                <span class="phase-badge">Phase 4 - Sub-task 4.3 ‚úÖ</span>
                SMS Preview Component - Testing
            </p>
            <div class="mode-indicator">
                <span class="mode-badge" [class.production]="isProduction" [class.development]="!isProduction">
                    {{ getModeIcon() }} {{ getModeName() }} Mode
                </span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="app-main">
        <div class="container">

            <!-- File Upload Section -->
            <section class="upload-section">
                <app-file-upload (fileImported)="onFileImported($event)"
                    (importConfirmed)="onImportConfirmed($event)"></app-file-upload>
            </section>

            <!-- Client List Section -->
            @if (hasData) {
            <section class="client-list-section">
                <app-client-list></app-client-list>
            </section>

            <!-- SMS Preview Section -->
            <section class="sms-preview-section">
                <app-sms-preview></app-sms-preview>
            </section>
            }
            <!-- Send Progress Section -->
            <app-send-progress></app-send-progress>
            <!-- Send Results Section -->
            <app-send-results></app-send-results>

            <!-- Error Log Viewer Section (Testing) -->
            <section class="error-viewer-section">
                <div class="error-viewer-toggle">
                    <button class="btn btn-outline" (click)="toggleErrorLogViewer()">
                        {{ showErrorLogViewer ? 'üìã –°–∫—Ä–∏–π' : 'üìã –ü–æ–∫–∞–∂–∏' }} –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≥—Ä–µ—à–∫–∏—Ç–µ
                    </button>

                    <!-- Test buttons (for development only) -->
                    @if (!isProduction) {
                    <div class="test-buttons">
                        <button class="btn btn-sm btn-outline" (click)="createTestErrors()">
                            üß™ –°—ä–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤–∏ –≥—Ä–µ—à–∫–∏
                        </button>
                        <button class="btn btn-sm btn-outline" (click)="clearTestErrors()">
                            üóëÔ∏è –ò–∑—á–∏—Å—Ç–∏ –≥—Ä–µ—à–∫–∏
                        </button>
                    </div>
                    }
                </div>

                @if (showErrorLogViewer) {
                <div class="error-viewer-container">
                    <app-error-log-viewer></app-error-log-viewer>
                </div>
                }
            </section>

            <!-- Alternative: Add as a floating button in the bottom-right corner -->
            <!-- 
            <div class="floating-error-button" 
                [class.active]="showErrorLogViewer"
                (click)="toggleErrorLogViewer()"
                title="–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –≥—Ä–µ—à–∫–∏—Ç–µ">
            üìã
            </div>
            -->

            <!-- Testing Instructions -->
            @if (!hasData) {
            <section class="testing-instructions card">
                <h3 class="text-primary">üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ SMS Preview</h3>
                <div class="test-steps">
                    <div class="test-step">
                        <strong>1. Upload JSON:</strong> –ö–∞—á–µ—Ç–µ JSON —Ñ–∞–π–ª —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏ –¥–∞–Ω–Ω–∏
                    </div>
                    <div class="test-step">
                        <strong>2. Select clients:</strong> –ò–∑–±–µ—Ä–µ—Ç–µ 3-5 –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç —Ç–∞–±–ª–∏—Ü–∞—Ç–∞
                    </div>
                    <div class="test-step">
                        <strong>3. Check preview:</strong> –ü—Ä–µ–≥–ª–µ–¥–∞–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—Ç–µ SMS —Å—ä–æ–±—â–µ–Ω–∏—è
                    </div>
                    <div class="test-step">
                        <strong>4. Character count:</strong> –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ character counter (–∑–µ–ª–µ–Ω–æ/–∂—ä–ª—Ç–æ/—á–µ—Ä–≤–µ–Ω–æ)
                    </div>
                    <div class="test-step">
                        <strong>5. Edit template:</strong> –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ —à–∞–±–ª–æ–Ω–∞ –∏ –≤–∏–∂—Ç–µ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ
                    </div>
                    <div class="test-step">
                        <strong>6. Cost estimation:</strong> –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –æ–±—â–∞—Ç–∞ —Ü–µ–Ω–∞ (credits)
                    </div>
                    <div class="test-step">
                        <strong>7. Phone validation:</strong> –¢–µ—Å—Ç–≤–∞–π—Ç–µ phone selection validation
                    </div>
                    <div class="test-step">
                        <strong>8. Send button:</strong> –ö–ª–∏–∫–Ω–µ—Ç–µ "–ò–∑–ø—Ä–∞—Ç–∏ SMS" (demo mode)
                    </div>
                </div>

                <!-- Sample JSON Structure -->
                <div class="json-sample">
                    <h4>üìÑ –ü—Ä–∏–º–µ—Ä–Ω–∞ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∏:</h4>
                    <pre><code>{{ sampleJsonStructure }}</code></pre>
                </div>

                <div class="info-box">
                    <h4>‚ú® –ù–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏ –≤ Sub-task 4.3:</h4>
                    <ul>
                        <li>üìù <strong>SMS Preview Component</strong> - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è</li>
                        <li>üìä <strong>Character Counter</strong> - –í–∏–∑—É–∞–ª–Ω–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏—è (70/160 chars)</li>
                        <li>‚úèÔ∏è <strong>Template Editor</strong> - Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —à–∞–±–ª–æ–Ω</li>
                        <li>üí∞ <strong>Cost Estimation</strong> - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Ö–æ–¥–∏</li>
                        <li>‚úÖ <strong>Phone Validation</strong> - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ</li>
                        <li>üî§ <strong>Encoding Detection</strong> - Unicode/Standard –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ</li>
                        <li>üì± <strong>Multiple Phones</strong> - –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –∑–∞ –ø–æ–≤–µ—á–µ –æ—Ç 1 —Ç–µ–ª–µ—Ñ–æ–Ω</li>
                    </ul>
                </div>
            </section>
            }

        </div>
    </main>

    <!-- Notifications -->
    <app-notification></app-notification>
</div>

<router-outlet></router-outlet>