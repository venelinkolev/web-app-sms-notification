<!-- 
  Send Progress Component Template
  Shows real-time SMS sending progress with controls
-->

<div class="send-progress-container">

    <!-- Only show when there is progress data -->
    @if (progress) {
    <div class="send-progress" [class]="getStatusClass()">

        <!-- Progress Header with Status -->
        <div class="progress-header">
            <div class="status-info">
                <span class="status-icon">{{ getStatusIcon() }}</span>
                <span class="status-text">{{ getStatusText() }}</span>
            </div>
            <div class="status-badge" [class]="getStatusClass()">
                {{ getStatusText() }}
            </div>
        </div>

        <!-- Progress Bar Section -->
        <!-- Will be implemented in Task 5.2.2 -->
        <div class="progress-bar-section">
            <div class="progress-bar-wrapper">
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" [class]="getStatusClass()" [style.width.%]="progress.percentage">
                    </div>
                </div>
                <div class="progress-percentage">
                    {{ progress.percentage }}%
                </div>
            </div>
        </div>

        <!-- Live Statistics Panel -->
        <!-- Will be implemented in Task 5.2.3 -->
        <div class="statistics-panel">
            <div class="stat-row">
                <span class="stat-label">üìä –ü—Ä–æ–≥—Ä–µ—Å:</span>
                <span class="stat-value">{{ progress.current }} / {{ progress.total }} SMS</span>
            </div>

            <div class="stat-row">
                <span class="stat-label">‚úÖ –£—Å–ø–µ—à–Ω–∏:</span>
                <span class="stat-value text-success">{{ progress.successful }}</span>
            </div>

            <div class="stat-row">
                <span class="stat-label">‚ùå –ù–µ—É—Å–ø–µ—à–Ω–∏:</span>
                <span class="stat-value text-error">{{ progress.failed }}</span>
            </div>

            @if (progress.estimatedTimeRemaining) {
            <div class="stat-row">
                <span class="stat-label">‚è±Ô∏è –û—Å—Ç–∞–≤–∞—â–æ –≤—Ä–µ–º–µ:</span>
                <span class="stat-value">{{ formatTime(progress.estimatedTimeRemaining) }}</span>
            </div>
            }

            <div class="stat-row">
                <span class="stat-label">üí∞ –û–±—â–∞ —Ü–µ–Ω–∞:</span>
                <span class="stat-value">{{ formatCost(progress.totalCost) }}</span>
            </div>

            @if (progress.sendingSpeed) {
            <div class="stat-row">
                <span class="stat-label">‚ö° –°–∫–æ—Ä–æ—Å—Ç:</span>
                <span class="stat-value">{{ progress.sendingSpeed }} SMS/sec</span>
            </div>
            }

            @if (progress.currentMessage) {
            <div class="stat-row current-message">
                <span class="stat-label">‚ÑπÔ∏è –°—Ç–∞—Ç—É—Å:</span>
                <span class="stat-value">{{ progress.currentMessage }}</span>
            </div>
            }
        </div>

        <!-- Control Buttons -->
        <!-- Will be implemented in Task 5.2.4 -->
        <div class="control-buttons">

            <!-- Pause Button (when sending) -->
            @if (canPause) {
            <button class="btn btn-warning" (click)="onPause()" [disabled]="!canPause">
                ‚è∏Ô∏è –ü–∞—É–∑–∞
            </button>
            }

            <!-- Resume Button (when paused) -->
            @if (canResume) {
            <button class="btn btn-primary" (click)="onResume()" [disabled]="!canResume">
                ‚ñ∂Ô∏è –ü—Ä–æ–¥—ä–ª–∂–∏
            </button>
            }

            <!-- Cancel Button (when active) -->
            @if (canCancel) {
            <button class="btn btn-outline btn-danger" (click)="onCancel()" [disabled]="!canCancel">
                ‚ùå –û—Ç–º–µ–Ω–∏
            </button>
            }

            <!-- Close Button (when completed) -->
            @if (progress.status === SendStatus.COMPLETED ||
            progress.status === SendStatus.CANCELLED ||
            progress.status === SendStatus.FAILED) {
            <button class="btn btn-outline" (click)="onClose()">
                ‚úñÔ∏è –ó–∞—Ç–≤–æ—Ä–∏
            </button>
            }
        </div>

        <!-- Keyboard Shortcuts Hint (optional) -->
        @if (isActive) {
        <div class="keyboard-hints">
            <small>üí° –ö–ª–∞–≤–∏—à–∏: Space - –ü–∞—É–∑–∞/–ü—Ä–æ–¥—ä–ª–∂–∏ | Esc - –û—Ç–º–µ–Ω–∏</small>
        </div>
        }

    </div>
    }

    <!-- Empty State (no progress data) -->
    @if (!progress || progress.status === SendStatus.IDLE) {
    <div class="empty-state">
        <p class="empty-message">–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞ –∏–∑–ø—Ä–∞—â–∞–Ω–µ</p>
    </div>
    }

</div>